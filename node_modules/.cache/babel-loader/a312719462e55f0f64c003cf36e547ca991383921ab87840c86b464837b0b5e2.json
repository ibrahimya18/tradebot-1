{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\VESTEL\\\\Desktop\\\\tradebot\\\\src\\\\components\\\\CandleChart.jsx\",\n  _s = $RefreshSig$();\nimport React, { useMemo } from 'react';\nimport { Chart as ChartJS, CategoryScale, LinearScale, TimeScale, Tooltip, Legend } from 'chart.js';\nimport { CandlestickController, CandlestickElement } from 'chartjs-chart-financial';\nimport { Chart } from 'react-chartjs-2';\nimport 'chartjs-adapter-date-fns';\nimport useMexcCandles from '../hooks/useWebSocket'; // Senin hook dosya yolu\n\n// Chart.js bileşenlerini kaydediyoruz\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, TimeScale, CandlestickController, CandlestickElement, Tooltip, Legend);\nexport const CandleChart = ({\n  interval,\n  onIntervalChange\n}) => {\n  _s();\n  // Hook ile seçilen interval'e göre mum verisini alıyoruz\n  const priceData = useMexcCandles('dogeusdt', interval);\n\n  // Son mumun timestamp'ını hesaplıyoruz\n  const lastTimestamp = useMemo(() => {\n    var _lastData$x;\n    if (priceData.length === 0) return null;\n    const lastData = priceData[priceData.length - 1];\n    return lastData !== null && lastData !== void 0 && (_lastData$x = lastData.x) !== null && _lastData$x !== void 0 && _lastData$x.getTime ? lastData.x.getTime() : null;\n  }, [priceData]);\n\n  // Son kapanış fiyatı (current price)\n  const currentPrice = priceData.length > 0 ? priceData[priceData.length - 1].c : null;\n  const data = {\n    datasets: [{\n      label: 'DOGE/USDT',\n      data: priceData,\n      upColor: 'rgba(0, 255, 0, 1)',\n      // yükselen mum\n      downColor: 'rgba(255, 0, 0, 1)',\n      // düşen mum\n      borderColor: 'rgba(0, 0, 0, 1)',\n      borderWidth: 1\n    }]\n  };\n  const options = {\n    responsive: true,\n    maintainAspectRatio: false,\n    scales: {\n      x: {\n        type: 'time',\n        time: {\n          unit: interval === '1d' ? 'day' : interval === '4h' ? 'hour' : 'minute',\n          tooltipFormat: 'yyyy-MM-dd HH:mm'\n        },\n        title: {\n          display: true,\n          text: 'Time'\n        }\n      },\n      y: {\n        title: {\n          display: true,\n          text: 'Price (USDT)'\n        }\n      }\n    },\n    plugins: {\n      tooltip: {\n        callbacks: {\n          label: context => {\n            const ohlc = context.raw;\n            if (!ohlc) return '';\n            return `O: ${ohlc.o}, H: ${ohlc.h}, L: ${ohlc.l}, C: ${ohlc.c}`;\n          }\n        }\n      },\n      legend: {\n        display: false\n      }\n    }\n  };\n  const buttonStyle = buttonInterval => ({\n    backgroundColor: interval === buttonInterval ? '#90EE90' : 'transparent',\n    border: '1px solid #ccc',\n    padding: '5px 10px',\n    borderRadius: '5px',\n    fontWeight: 'bold',\n    cursor: 'pointer',\n    transition: 'background-color 0.3s',\n    marginRight: '8px'\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      height: '500px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 10,\n        fontSize: '18px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: [\"Current Price: \", currentPrice !== null ? currentPrice : 'Loading...', \" USDT\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), lastTimestamp && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 10,\n        fontSize: '16px',\n        fontWeight: 'bold'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: [\"Last Updated: \", new Date(lastTimestamp).toLocaleString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 10\n      },\n      children: ['1m', '15m', '60m', '4h', '1d'].map(i => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => onIntervalChange(i),\n        style: buttonStyle(i),\n        children: i\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Chart, {\n      type: \"candlestick\",\n      data: data,\n      options: options\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n};\n_s(CandleChart, \"Z7OiXK8yTDvVTmn6v6p3xn7v4Yw=\", false, function () {\n  return [useMexcCandles];\n});\n_c = CandleChart;\nvar _c;\n$RefreshReg$(_c, \"CandleChart\");","map":{"version":3,"names":["React","useMemo","Chart","ChartJS","CategoryScale","LinearScale","TimeScale","Tooltip","Legend","CandlestickController","CandlestickElement","useMexcCandles","jsxDEV","_jsxDEV","register","CandleChart","interval","onIntervalChange","_s","priceData","lastTimestamp","_lastData$x","length","lastData","x","getTime","currentPrice","c","data","datasets","label","upColor","downColor","borderColor","borderWidth","options","responsive","maintainAspectRatio","scales","type","time","unit","tooltipFormat","title","display","text","y","plugins","tooltip","callbacks","context","ohlc","raw","o","h","l","legend","buttonStyle","buttonInterval","backgroundColor","border","padding","borderRadius","fontWeight","cursor","transition","marginRight","style","width","height","children","marginBottom","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","Date","toLocaleString","map","i","onClick","_c","$RefreshReg$"],"sources":["C:/Users/VESTEL/Desktop/tradebot/src/components/CandleChart.jsx"],"sourcesContent":["import React, { useMemo } from 'react';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  TimeScale,\r\n  Tooltip,\r\n  Legend\r\n} from 'chart.js';\r\nimport { CandlestickController, CandlestickElement } from 'chartjs-chart-financial';\r\nimport { Chart } from 'react-chartjs-2';\r\nimport 'chartjs-adapter-date-fns';\r\nimport useMexcCandles from '../hooks/useWebSocket'; // Senin hook dosya yolu\r\n\r\n// Chart.js bileşenlerini kaydediyoruz\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  TimeScale,\r\n  CandlestickController,\r\n  CandlestickElement,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\nexport const CandleChart = ({ interval, onIntervalChange }) => {\r\n  // Hook ile seçilen interval'e göre mum verisini alıyoruz\r\n  const priceData = useMexcCandles('dogeusdt', interval);\r\n\r\n  // Son mumun timestamp'ını hesaplıyoruz\r\n  const lastTimestamp = useMemo(() => {\r\n    if (priceData.length === 0) return null;\r\n    const lastData = priceData[priceData.length - 1];\r\n    return lastData?.x?.getTime ? lastData.x.getTime() : null;\r\n  }, [priceData]);\r\n\r\n  // Son kapanış fiyatı (current price)\r\n  const currentPrice = priceData.length > 0 ? priceData[priceData.length - 1].c : null;\r\n\r\n  const data = {\r\n    datasets: [\r\n      {\r\n        label: 'DOGE/USDT',\r\n        data: priceData,\r\n        upColor: 'rgba(0, 255, 0, 1)',      // yükselen mum\r\n        downColor: 'rgba(255, 0, 0, 1)',    // düşen mum\r\n        borderColor: 'rgba(0, 0, 0, 1)',\r\n        borderWidth: 1,\r\n      },\r\n    ],\r\n  }; \r\n  const options = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    scales: {\r\n      x: {\r\n        type: 'time',\r\n        time: {\r\n          unit: interval === '1d' ? 'day' : interval === '4h' ? 'hour' : 'minute',\r\n          tooltipFormat: 'yyyy-MM-dd HH:mm',\r\n        },\r\n        title: {\r\n          display: true,\r\n          text: 'Time',\r\n        },\r\n      },\r\n      y: {\r\n        title: {\r\n          display: true,\r\n          text: 'Price (USDT)',\r\n        },\r\n      },\r\n    },\r\n    plugins: {\r\n      tooltip: {\r\n        callbacks: {\r\n          label: (context) => {\r\n            const ohlc = context.raw;\r\n            if (!ohlc) return '';\r\n            return `O: ${ohlc.o}, H: ${ohlc.h}, L: ${ohlc.l}, C: ${ohlc.c}`;\r\n          },\r\n        },\r\n      },\r\n      legend: {\r\n        display: false,\r\n      },\r\n    },\r\n  };\r\n\r\n  const buttonStyle = (buttonInterval) => ({\r\n    backgroundColor: interval === buttonInterval ? '#90EE90' : 'transparent',\r\n    border: '1px solid #ccc',\r\n    padding: '5px 10px',\r\n    borderRadius: '5px',\r\n    fontWeight: 'bold',\r\n    cursor: 'pointer',\r\n    transition: 'background-color 0.3s',\r\n    marginRight: '8px',\r\n  });\r\n\r\n  return (\r\n    <div style={{ width: '100%', height: '500px' }}>\r\n      <div style={{ marginBottom: 10, fontSize: '18px' }}>\r\n        <strong>Current Price: {currentPrice !== null ? currentPrice : 'Loading...'} USDT</strong>\r\n      </div>\r\n\r\n      {lastTimestamp && (\r\n        <div style={{ marginBottom: 10, fontSize: '16px', fontWeight: 'bold' }}>\r\n          <strong>Last Updated: {new Date(lastTimestamp).toLocaleString()}</strong>\r\n        </div>\r\n      )}\r\n\r\n      <div style={{ marginBottom: 10 }}>\r\n        {['1m', '15m', '60m', '4h', '1d'].map((i) => (\r\n          <button key={i} onClick={() => onIntervalChange(i)} style={buttonStyle(i)}>\r\n            {i}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      <Chart type=\"candlestick\" data={data} options={options} />\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}